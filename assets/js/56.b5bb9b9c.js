(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{404:function(_,v,t){"use strict";t.r(v);var l=t(42),i=Object(l.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"响应状态码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#响应状态码"}},[_._v("#")]),_._v(" 响应状态码")]),_._v(" "),t("p",[_._v("状态行")]),_._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"",href:"https://static001.geekbang.org/resource/image/a1/00/a1477b903cd4d5a69686683c0dbc3300.png"}},[t("img",{attrs:{src:"https://static001.geekbang.org/resource/image/a1/00/a1477b903cd4d5a69686683c0dbc3300.png",alt:""}})])]),_._v(" "),t("ol",[t("li",[t("h4",{attrs:{id:"状态码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#状态码"}},[_._v("#")]),_._v(" 状态码")]),_._v(" "),t("p",[_._v("RFC 标准里规定的状态码是三位数，所以取值范围就是从 000 到 999。")]),_._v(" "),t("p",[_._v("RFC 标准把状态码分成了五类，由 000~999 变成了 100~599")]),_._v(" "),t("p",[_._v("这五类的具体含义是：")]),_._v(" "),t("ol",[t("li",[t("strong",[_._v("1××：提示信息")]),_._v("，表示目前是协议处理的中间状态，还需要后续的操作；")]),_._v(" "),t("li",[t("strong",[_._v("2××：成功")]),_._v("，报文已经收到并被正确处理；")]),_._v(" "),t("li",[t("strong",[_._v("3××：重定向")]),_._v("，资源位置发生变动，需要客户端重新发送请求；")]),_._v(" "),t("li",[t("strong",[_._v("4××：客户端错误")]),_._v("，请求报文有误，服务器无法处理；")]),_._v(" "),t("li",[t("strong",[_._v("5××：服务器错误")]),_._v("，服务器在处理请求时内部发生了错误。")])]),_._v(" "),t("blockquote",[t("p",[_._v("目前 RFC 标准里总共有 41 个状态码，但状态码的定义是开放的，允许自行扩展")])])]),_._v(" "),t("li",[t("h4",{attrs:{id:"_1××"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1××"}},[_._v("#")]),_._v(" 1××")]),_._v(" "),t("p",[_._v("1××类状态码属于提示信息，是协议处理的中间状态，实际能够用到的时候很少。")]),_._v(" "),t("blockquote",[t("p",[_._v("我们偶尔能够见到的是“"),t("strong",[_._v("101 Switching Protocols")]),_._v("”。")]),_._v(" "),t("p",[_._v("它的意思是客户端使用 "),t("strong",[_._v("Upgrade")]),_._v(" 头字段，要求在 HTTP 协议的基础上改成其他的协议继续通信，比如 "),t("strong",[_._v("WebSocket")]),_._v("。而如果服务器也同意变更协议，就会发送状态码 101，但这之后的数据传输就不会再使用 HTTP 了。")])])]),_._v(" "),t("li",[t("h4",{attrs:{id:"_2××"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2××"}},[_._v("#")]),_._v(" 2××")]),_._v(" "),t("p",[t("strong",[_._v("2××类状态码表示服务器收到并成功处理了客户端的请求")])]),_._v(" "),t("ul",[t("li",[t("p",[t("strong",[_._v("200 OK")])]),_._v(" "),t("ul",[t("li",[_._v("表示一切正常")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("204 No Content")])]),_._v(" "),t("ul",[t("li",[_._v("与“200 OK”基本相同，"),t("strong",[_._v("但响应头后没有 body 数据")])])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("206 Partial Content")])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("服务器成功处理了请求")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("但 body 里的数据不是资源的全部，而是其中的一部分。")])]),_._v(" "),t("li",[t("p",[_._v("通常还会伴随着头字段“"),t("strong",[_._v("Content-Range")]),_._v("”")]),_._v(" "),t("blockquote",[t("p",[_._v("例如“Content-Range: bytes 0-99/2000”，意思是此次获取的是总计 2000 个字节的前 100 个字节")])])])])]),_._v(" "),t("li",[t("p",[_._v("HTTP 分块下载或断点续传的基础，在客户端发送“范围请求”、要求获取资源的部分数据时出现")])])])])])]),_._v(" "),t("li",[t("h4",{attrs:{id:"_3xx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3xx"}},[_._v("#")]),_._v(" 3xx")]),_._v(" "),t("p",[_._v("3××类状态码表示"),t("strong",[_._v("客户端请求的资源发生了变动")]),_._v("，客户端必须用新的 URI 重新发送请求获取资源，也就是通常所说的“重定向”，包括著名的 301、302 跳转。")]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("301 Moved Permanently")]),_._v(" "),t("ul",[t("li",[_._v("永久重定向")]),_._v(" "),t("li",[_._v("此次请求的资源已经不存在了，需要改用改用新的 URI 再次访问。")]),_._v(" "),t("li",[_._v("例如：http升级到https")]),_._v(" "),t("li",[_._v("会更新书签和记录")]),_._v(" "),t("li",[t("strong",[_._v("Location")]),_._v(" 指明后续要跳转的 URI")])])]),_._v(" "),t("li",[t("strong",[_._v("302 Found")]),_._v(" "),t("ul",[t("li",[_._v("临时重定向")]),_._v(" "),t("li",[_._v("请求的资源还在，但需要暂时用另一个 URI 来访问")]),_._v(" "),t("li",[_._v("例如：系统维护")]),_._v(" "),t("li",[t("strong",[_._v("Location")]),_._v(" 指明后续要跳转的 URI")])])]),_._v(" "),t("li",[t("strong",[_._v("304 Not Modified")]),_._v(" "),t("ul",[t("li",[_._v("表示资源未修改")]),_._v(" "),t("li",[_._v("它用于 If-Modified-Since 等条件请求，用于缓存控制")]),_._v(" "),t("li",[_._v("可理解为：缓存重定向")])])])])]),_._v(" "),t("li",[t("h4",{attrs:{id:"_4××"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4××"}},[_._v("#")]),_._v(" 4××")]),_._v(" "),t("p",[_._v("4××类状态码表示客户端发送的请求报文有误，服务器无法处理，它就是真正的“错误码”含义了。")]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("400 Bad Request")]),_._v(" "),t("ul",[t("li",[_._v("表示请求报文有错误")]),_._v(" "),t("li",[_._v("只是一个笼统的错误，客户端看到 400 只会是“一头雾水”“不知所措”")])])]),_._v(" "),t("li",[t("strong",[_._v("401 Unauthorized")]),_._v(" "),t("ul",[t("li",[_._v("未授权，通常表示没有权限")])])]),_._v(" "),t("li",[t("strong",[_._v("403 Forbidden")]),_._v(" "),t("ul",[t("li",[_._v("表示服务器禁止访问资源")]),_._v(" "),t("li",[_._v("例如信息敏感、法律禁止等，")]),_._v(" "),t("li",[_._v("如果服务器友好一点，可以在 body 里详细说明拒绝请求的原因，不过现实中通常都是直接给一个“闭门羹”")])])]),_._v(" "),t("li",[t("strong",[_._v("404 Not Found")]),_._v(" "),t("ul",[t("li",[_._v("表示资源在本服务器上未找到，所以无法提供给客户端")])])])]),_._v(" "),t("p",[_._v("4××里剩下的一些代码较明确地说明了错误的原因，都很好理解，开发中常用的有：")]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("405 Method Not Allowed")]),_._v(" "),t("ul",[t("li",[_._v("不允许使用某些方法操作资源")]),_._v(" "),t("li",[_._v("例如不允许 POST 只能 GET；")])])]),_._v(" "),t("li",[_._v("406 Not Acceptable：资源无法满足客户端请求的条件，例如请求中文但只有英文；")]),_._v(" "),t("li",[_._v("408 Request Timeout：请求超时，服务器等待了过长的时间；")]),_._v(" "),t("li",[_._v("409 Conflict：多个请求发生了冲突，可以理解为多线程并发时的竞态；413 Request Entity Too Large：请求报文里的 body 太大；")]),_._v(" "),t("li",[_._v("414 Request-URI Too Long：请求行里的 URI 太大；")]),_._v(" "),t("li",[_._v("429 Too Many Requests：客户端发送了太多的请求，通常是由于服务器的限连策略；")]),_._v(" "),t("li",[_._v("431 Request Header Fields Too Large：请求头某个字段或总体太大；")])])]),_._v(" "),t("li",[t("h4",{attrs:{id:"_5xx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5xx"}},[_._v("#")]),_._v(" 5xx")]),_._v(" "),t("p",[_._v("5××类状态码表示客户端请求报文正确，但服务器在处理时内部发生了错误，无法返回应有的响应数据，是服务器端的“错误码”。")]),_._v(" "),t("ul",[t("li",[t("p",[t("strong",[_._v("500 Internal Server Error")])]),_._v(" "),t("ul",[t("li",[_._v("与 400 类似，也是一个通用的错误码")]),_._v(" "),t("li",[_._v("服务器究竟发生了什么错误我们是不知道的")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("501 Not Implemented")])]),_._v(" "),t("ul",[t("li",[_._v("表示客户端请求的功能还不支持")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("502 Bad Gateway")])]),_._v(" "),t("ul",[t("li",[_._v("通常是服务器作为网关或者代理时返回的错误码")]),_._v(" "),t("li",[_._v("表示服务器自身工作正常，访问后端服务器时发生了错误")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("503 Service Unavailable")])]),_._v(" "),t("ul",[t("li",[t("p",[_._v("表示服务器当前很忙，暂时无法响应服务")])]),_._v(" "),t("li",[t("p",[_._v("503 是一个“临时”的状态，很可能过几秒钟后服务器就不那么忙了，可以继续提供服务")]),_._v(" "),t("blockquote",[t("p",[_._v("503 响应报文里通常还会有一个“"),t("strong",[_._v("Retry-After")]),_._v("”字段，指示客户端可以在多久以后再次尝试发送请求。")])])])])])])])]),_._v(" "),t("h3",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[_._v("#")]),_._v(" 总结")]),_._v(" "),t("ol",[t("li",[_._v("状态码在响应报文里表示了服务器对请求的处理结果；")]),_._v(" "),t("li",[_._v("状态码后的原因短语是简单的文字描述，可以自定义；")]),_._v(" "),t("li",[_._v("状态码是十进制的三位数，分为五类，从 100 到 599；")]),_._v(" "),t("li",[_._v("2××类状态码表示成功，常用的有 200、204、206；")]),_._v(" "),t("li",[_._v("3××类状态码表示重定向，常用的有 301、302、304；")]),_._v(" "),t("li",[_._v("4××类状态码表示客户端错误，常用的有 400、403、404；")]),_._v(" "),t("li",[_._v("5××类状态码表示服务器错误，常用的有 500、501、502、503。")])])])}),[],!1,null,null,null);v.default=i.exports}}]);