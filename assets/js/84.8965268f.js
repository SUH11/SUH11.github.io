(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{430:function(v,_,t){"use strict";t.r(_);var a=t(42),e=Object(a.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"常说的-四层-和-七层-到底是什么？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常说的-四层-和-七层-到底是什么？"}},[v._v("#")]),v._v(" 常说的“四层”和“七层”到底是什么？")]),v._v(" "),t("p",[v._v("TCP/IP 协议是一个“有层次的协议栈”")]),v._v(" "),t("p",[v._v("什么“四层负载均衡”“七层负载均衡”，什么“二层转发”“三层路由”……")]),v._v(" "),t("ol",[t("li",[t("h4",{attrs:{id:"tcp-ip-网络分层模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcp-ip-网络分层模型"}},[v._v("#")]),v._v(" TCP/IP 网络分层模型")]),v._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"TCP/IP 网络分层模型",href:"https://static001.geekbang.org/resource/image/2b/03/2b8fee82b58cc8da88c74a33f2146703.png"}},[t("img",{attrs:{src:"https://static001.geekbang.org/resource/image/2b/03/2b8fee82b58cc8da88c74a33f2146703.png",alt:"TCP/IP 网络分层模型"}})])]),v._v(" "),t("p",[v._v("层次顺序是“"),t("strong",[v._v("从下往上")]),v._v("”数的")]),v._v(" "),t("ul",[t("li",[v._v("第一层叫“"),t("strong",[v._v("链接层")]),v._v("”\n"),t("ul",[t("li",[v._v("负责在以太网、WiFi 这样的底层网络上发送原始数据包")]),v._v(" "),t("li",[v._v("也叫Mac层")]),v._v(" "),t("li",[v._v("传输单位是：帧")])])]),v._v(" "),t("li",[v._v("第二层叫“"),t("strong",[v._v("网际层")]),v._v("”或者“"),t("strong",[v._v("网络互连层")]),v._v("”\n"),t("ul",[t("li",[t("strong",[v._v("IP协议")]),v._v("在这一层")]),v._v(" "),t("li",[v._v("用 IP 地址取代 MAC 地址，把许许多多的局域网、广域网连接成一个虚拟的巨大网络")]),v._v(" "),t("li",[v._v("传输单位是：包")])])]),v._v(" "),t("li",[v._v("第三层叫“"),t("strong",[v._v("传输层")]),v._v("”\n"),t("ul",[t("li",[v._v("保证数据在 IP 地址标记的两点之间“可靠”地传输")]),v._v(" "),t("li",[t("strong",[v._v("TCP协议")]),v._v("：传输单位是段（segment）")]),v._v(" "),t("li",[t("strong",[v._v("UDP协议")])])])]),v._v(" "),t("li",[v._v("第四层叫“应用层”\n"),t("ul",[t("li",[v._v("有各种面向具体应用的协议")]),v._v(" "),t("li",[v._v("有Telnet、SSH、FTP、SMTP、HTTP等等")]),v._v(" "),t("li",[v._v("HTTP传输单位是：消息或者报文")])])])])]),v._v(" "),t("li",[t("h4",{attrs:{id:"osi-网络分层模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#osi-网络分层模型"}},[v._v("#")]),v._v(" OSI 网络分层模型")]),v._v(" "),t("p",[v._v("OSI：开放式系统互联通信参考模型（Open System Interconnection Reference Model）")]),v._v(" "),t("p",[v._v("TCP/IP 发明于 1970 年代，当时除了它还有很多其他的网络协议，整个网络世界比较混乱。")]),v._v(" "),t("p",[v._v("这个时候国际标准组织（ISO）注意到了这种现象，感觉“野路子”太多，就想要来个“大一统”。于是设计出了一个新的网络分层模型，想用这个新框架来统一既存的各种网络协议。")]),v._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"OSI 网络分层模型",href:"https://static001.geekbang.org/resource/image/3a/dc/3abcf1462621ff86758a8d9571c07cdc.png"}},[t("img",{attrs:{src:"https://static001.geekbang.org/resource/image/3a/dc/3abcf1462621ff86758a8d9571c07cdc.png",alt:"OSI 网络分层模型"}})])]),v._v(" "),t("p",[v._v("OSI 模型分成了七层")]),v._v(" "),t("ul",[t("li",[v._v("第一层：物理层，网络的物理形式\n"),t("ul",[t("li",[v._v("例如电缆、光纤、网卡、集线器等等；")])])]),v._v(" "),t("li",[v._v("第二层：数据链路层\n"),t("ul",[t("li",[v._v("它基本相当于 TCP/IP 的链接层（Mac层）；")])])]),v._v(" "),t("li",[v._v("第三层：网络层，相当于 TCP/IP 里的网际层（IP）；")]),v._v(" "),t("li",[v._v("第四层：传输层，相当于 TCP/IP 里的传输层（TCP/UDP）；")]),v._v(" "),t("li",[v._v("第五层：会话层，维护网络中的连接状态，即保持会话和同步；")]),v._v(" "),t("li",[v._v("第六层：表示层，把数据转换为合适、可理解的语法和语义；")]),v._v(" "),t("li",[v._v("第七层：应用层，面向具体的应用传输数据（HTTP）。")])]),v._v(" "),t("p",[v._v("这种说法只是“理论上”的层次，并不是与现实完全对应。")])]),v._v(" "),t("li",[t("h4",{attrs:{id:"两个分层模型的映射关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#两个分层模型的映射关系"}},[v._v("#")]),v._v(" 两个分层模型的映射关系")]),v._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"两个分层模型的映射关系",href:"https://static001.geekbang.org/resource/image/9d/94/9d9b3c9274465c94e223676b6d434194.png"}},[t("img",{attrs:{src:"https://static001.geekbang.org/resource/image/9d/94/9d9b3c9274465c94e223676b6d434194.png",alt:"两个分层模型的映射关系"}})])]),v._v(" "),t("ul",[t("li",[v._v("第一层：物理层，TCP/IP 里无对应；")]),v._v(" "),t("li",[v._v("第二层：数据链路层，对应 TCP/IP 的链接层；")]),v._v(" "),t("li",[v._v("第三层：网络层，对应 TCP/IP 的网际层；")]),v._v(" "),t("li",[v._v("第四层：传输层，对应 TCP/IP 的传输层；")]),v._v(" "),t("li",[v._v("第五、六、七层：统一对应到 TCP/IP 的应用层。")])]),v._v(" "),t("p",[v._v("“"),t("strong",[v._v("四层负载均衡")]),v._v("”就是指工作在传输层上，基于 TCP/IP 协议的特性，例如 IP 地址、端口号等实现对后端服务器的负载均衡。")]),v._v(" "),t("p",[v._v("“"),t("strong",[v._v("七层负载均衡")]),v._v("”就是指工作在应用层上，看到的是 HTTP 协议，解析 HTTP 报文里的 URI、主机名、资源类型等数据，再用适当的策略转发给后端服务器。")])])]),v._v(" "),t("h3",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[v._v("#")]),v._v(" 总结")]),v._v(" "),t("ol",[t("li",[v._v("TCP/IP 分为四层，核心是二层的 IP 和三层的 TCP，HTTP 在第四层；")]),v._v(" "),t("li",[v._v("OSI 分为七层，基本对应 TCP/IP，TCP 在第四层，HTTP 在第七层；")]),v._v(" "),t("li",[v._v("OSI 可以映射到 TCP/IP，但这期间一、五、六层消失了；")]),v._v(" "),t("li",[v._v("日常交流的时候我们通常使用 OSI 模型，用四层、七层等术语；")]),v._v(" "),t("li",[v._v("HTTP 利用 TCP/IP 协议栈逐层打包再拆包，实现了数据传输，但下面的细节并不可见。")])]),v._v(" "),t("p",[v._v("有一个辨别四层和七层比较好的（但不是绝对的）小窍门，“"),t("strong",[v._v("两个凡是")]),v._v("”：凡是由操作系统负责处理的就是四层或四层以下，否则，凡是需要由应用程序（也就是你自己写代码）负责处理的就是七层")])])}),[],!1,null,null,null);_.default=e.exports}}]);