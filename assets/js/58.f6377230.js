(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{406:function(t,e,a){"use strict";a.r(e);var s=a(42),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"http的实体数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http的实体数据"}},[t._v("#")]),t._v(" http的实体数据")]),t._v(" "),a("ol",[a("li",[a("h4",{attrs:{id:"数据类型与编码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据类型与编码"}},[t._v("#")]),t._v(" 数据类型与编码")]),t._v(" "),a("p",[t._v("多用途互联网邮件拓展：Multipurpose Internet Mail Extendsions")]),t._v(" "),a("p",[t._v("MIME type:")]),t._v(" "),a("p",[t._v("​\ttype/subtype")]),t._v(" "),a("ul",[a("li",[t._v("text : text/html, text/css, text/plain")]),t._v(" "),a("li",[t._v("image")]),t._v(" "),a("li",[t._v("audio/video")]),t._v(" "),a("li",[t._v("application")])]),t._v(" "),a("p",[t._v("Encoding type:")]),t._v(" "),a("ul",[a("li",[t._v("gizp")]),t._v(" "),a("li",[t._v("deflate")]),t._v(" "),a("li",[t._v("br")])])]),t._v(" "),a("li",[a("h4",{attrs:{id:"数据类型使用的头字段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据类型使用的头字段"}},[t._v("#")]),t._v(" 数据类型使用的头字段")]),t._v(" "),a("p",[t._v("内容协商：客户端用 "),a("code",[t._v("Accept")]),t._v(" 头告诉服务器希望接收什么样的数据，而服务器用 "),a("code",[t._v("Content")]),t._v(" 头告诉客户端实际发送了什么样的数据")])])]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 也就是MIME type")]),t._v("\nAccept"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" text"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("application"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("image"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("webp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("image"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("png\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[a("a",{attrs:{"data-fancybox":"",title:"image-20200622102431305",href:"https://raw.githubusercontent.com/SUH11/images/master/http/15-1.png"}},[a("img",{attrs:{src:"https://raw.githubusercontent.com/SUH11/images/master/http/15-1.png",alt:"image-20200622102431305"}})])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("Accept")]),t._v(" 字段标记的是客户端可理解的 MIME type")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Content-Type")]),t._v(" 告诉实体数据的真实类型")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Accept-Encoding")]),t._v(" 字段标记的是客户端支持的压缩格式")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Content-Encoding")]),t._v(" 服务器实际使用的压缩格式放在响应头字段")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Accept-Language")]),t._v(" 字段标记了客户端可理解的自然语言")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Content-Language")]),t._v(" 服务器告诉客户端实体数据使用的实际语言类型")])])]),t._v(" "),a("blockquote",[a("p",[t._v("字符集在 HTTP 里使用的请求头字段是 Accept-Charset")]),t._v(" "),a("p",[t._v("但响应头里却没有对应的 Content-Charset，而是在 Content-Type 字段的数据类型后面用“charset=xxx”来表示")])]),t._v(" "),a("p",[t._v("注意："),a("code",[t._v("Content-Type")]),t._v("是实体字段，也是通用字段，请求和响应都可以用。")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[t._v("内容协商的质量值")]),t._v(" "),a("p",[t._v("q：权重的最大值是 1，最小值是 0.01，默认值是 1，如果值是 0 就表示拒绝。")])])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Accept: text/html,application/xml;q=0.9,*/*;q=0.8\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[a("h4",{attrs:{id:"内容协商的结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内容协商的结果"}},[t._v("#")]),t._v(" 内容协商的结果")])])]),t._v(" "),a("p",[t._v("内容协商的过程是不透明的，每个 Web 服务器使用的算法都不一样")]),t._v(" "),a("p",[t._v("Vary字段：表示服务器依据了 Accept-Encoding、User-Agent 和 Accept 这三个头字段，然后决定了发回的响应报文。")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Vary: Accept-Encoding,User-Agent,Accept\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("ol",[a("li",[t._v("数据类型表示实体数据的内容是什么，使用的是 MIME type，相关的头字段是 Accept 和 Content-Type；")]),t._v(" "),a("li",[t._v("数据编码表示实体数据的压缩方式，相关的头字段是 Accept-Encoding 和 Content-Encoding；")]),t._v(" "),a("li",[t._v("语言类型表示实体数据的自然语言，相关的头字段是 Accept-Language 和 Content-Language；")]),t._v(" "),a("li",[t._v("字符集表示实体数据的编码方式，相关的头字段是 Accept-Charset 和 Content-Type；")]),t._v(" "),a("li",[t._v("客户端需要在请求头里使用 Accept 等头字段与服务器进行“内容协商”，要求服务器返回最合适的数据；")]),t._v(" "),a("li",[t._v("Accept 等头字段可以用“,”顺序列出多个可能的选项，还可以用“;q=”参数来精确指定权重。")])])])}),[],!1,null,null,null);e.default=n.exports}}]);