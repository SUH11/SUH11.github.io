(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{433:function(a,t,v){"use strict";v.r(t);var _=v(42),e=Object(_.a)({},(function(){var a=this,t=a.$createElement,v=a._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[v("h1",{attrs:{id:"键入网址再按下回车，后面究竟发生了什么？"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#键入网址再按下回车，后面究竟发生了什么？"}},[a._v("#")]),a._v(" 键入网址再按下回车，后面究竟发生了什么？")]),a._v(" "),v("ol",[v("li",[v("h4",{attrs:{id:"使用-ip-地址访问-web-服务器"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#使用-ip-地址访问-web-服务器"}},[a._v("#")]),a._v(" 使用 IP 地址访问 Web 服务器")])]),a._v(" "),v("li",[v("h4",{attrs:{id:"抓包分析"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#抓包分析"}},[a._v("#")]),a._v(" 抓包分析")]),a._v(" "),v("ol",[v("li",[a._v("使用“三次握手”建立与 Web 服务器的连接\n"),v("ul",[v("li",[a._v("浏览器要用 HTTP 协议收发数据，首先要做的就是建立 TCP 连接。")]),a._v(" "),v("li",[a._v("三次握手：SYN、SYN/ACK、ACK 的三个包")])])]),a._v(" "),v("li",[a._v("客户端通过 TCP 发送了一个“GET / HTTP/1.1”请求报文")]),a._v(" "),v("li",[a._v("Web 服务器回复了第五个包，在 TCP 协议层面确认：“刚才的报文我已经收到了”")]),a._v(" "),v("li",[a._v("原来是要求获取根目录下的默认文件，好吧，那我就从磁盘上把那个文件全读出来，再拼成符合 HTTP 格式的报文，发回去吧。这就是 Wireshark 里的第六个包“HTTP/1.1 200 OK”，底层走的还是 TCP 协议。")]),a._v(" "),v("li",[a._v("同样的，浏览器也要给服务器回复一个 TCP 的 ACK 确认，“你的响应报文收到了，多谢”，即第七个包。")]),a._v(" "),v("li",[a._v("这时浏览器就收到了响应数据，解析报文，调用排版引擎、JavaScript 引擎等等处理一下")])]),a._v(" "),v("p",[a._v("没有TCP的“四次挥手”，因为 HTTP/1.1 长连接特性，默认不会立即关闭连接。")]),a._v(" "),v("p",[v("a",{attrs:{"data-fancybox":"",title:"",href:"https://static001.geekbang.org/resource/image/8a/19/8a5bddd3d8046daf7032c7d60a3d1a19.png"}},[v("img",{attrs:{src:"https://static001.geekbang.org/resource/image/8a/19/8a5bddd3d8046daf7032c7d60a3d1a19.png",alt:""}})])]),a._v(" "),v("p",[a._v("再简要叙述一下这次最简单的浏览器 HTTP 请求过程：")]),a._v(" "),v("ol",[v("li",[v("p",[a._v("浏览器从地址栏的输入中获得服务器的 IP 地址和端口号；")])]),a._v(" "),v("li",[v("p",[a._v("浏览器用 TCP 的三次握手与服务器建立连接；")])]),a._v(" "),v("li",[v("p",[a._v("浏览器向服务器发送拼好的报文；")])]),a._v(" "),v("li",[v("p",[a._v("服务器收到报文后处理请求，同样拼好报文再发给浏览器；")])]),a._v(" "),v("li",[v("p",[a._v("浏览器解析报文，渲染输出页面。")])])])])]),a._v(" "),v("h3",{attrs:{id:"总结"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结")]),a._v(" "),v("ol",[v("li",[a._v("HTTP 协议基于底层的 TCP/IP 协议，所以必须要用 IP 地址建立连接；")]),a._v(" "),v("li",[a._v("如果不知道 IP 地址，就要用 DNS 协议去解析得到 IP 地址，否则就会连接失败；")]),a._v(" "),v("li",[a._v("建立 TCP 连接后会顺序收发数据，请求方和应答方都必须依据 HTTP 规范构建和解析报文；")]),a._v(" "),v("li",[a._v("为了减少响应时间，整个过程中的每一个环节都会有缓存，能够实现“短路”操作；")]),a._v(" "),v("li",[a._v("虽然现实中的 HTTP 传输过程非常复杂，但理论上仍然可以简化成实验里的“两点”模型。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);