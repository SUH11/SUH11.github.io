(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{424:function(s,t,a){"use strict";a.r(t);var n=a(42),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"我应该迁移到http-2吗？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我应该迁移到http-2吗？"}},[s._v("#")]),s._v(" 我应该迁移到HTTP/2吗？")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("HTTP/2 的优点")]),s._v(" "),a("ul",[a("li",[s._v("完全保持了与 HTTP/1 的兼容")]),s._v(" "),a("li",[s._v("更安全的 HTTP、更快的 HTTPS")]),s._v(" "),a("li",[s._v("一个域名（或者 IP）只用一个 TCP 连接")])])]),s._v(" "),a("li",[a("p",[s._v("HTTP/2 的缺点")]),s._v(" "),a("ul",[a("li",[s._v("“队头阻塞”\n"),a("ul",[a("li",[s._v("如果网络连接质量差，发生丢包，那么 TCP 会等待重传，传输速度就会降低。")])])]),s._v(" "),a("li",[s._v("在移动网络中发生 IP 地址切换的时候，下层的 TCP 必须重新建连，要再次“握手”，经历“慢启动”，而且之前连接里积累的 HPACK 字典也都消失了，必须重头开始计算，导致带宽浪费和时延。")]),s._v(" "),a("li",[s._v("HTTP/2 对一个域名只开一个连接，所以一旦这个连接出问题，那么整个网站的体验也就变差了。")])])]),s._v(" "),a("li",[a("p",[s._v("应该迁移到 HTTP/2 吗？")]),s._v(" "),a("ul",[a("li",[s._v("流量大，可迁移\n"),a("ul",[a("li",[s._v("HTTP/2 的侧重点是“性能”，所以“是否迁移”就需要在这方面进行评估。如果网站的流量很大，那么 HTTP/2 就可以带来可观的收益")])])]),s._v(" "),a("li",[s._v("新建网站：可迁移")])])]),s._v(" "),a("li",[a("p",[s._v("配置 HTTP/2")]),s._v(" "),a("div",{staticClass:"language-nginx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl")]),s._v(" http2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v("  www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate")]),s._v("         xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("crt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate_key")]),s._v("     xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),a("ol",[a("li",[s._v("HTTP/2 完全兼容 HTTP/1，是“更安全的 HTTP、更快的 HTTPS”，头部压缩、多路复用等技术可以充分利用带宽，降低延迟，从而大幅度提高上网体验；")]),s._v(" "),a("li",[s._v("TCP 协议存在“队头阻塞”，所以 HTTP/2 在弱网或者移动网络下的性能表现会不如 HTTP/1；")]),s._v(" "),a("li",[s._v("迁移到 HTTP/2 肯定会有性能提升，但高流量网站效果会更显著；")]),s._v(" "),a("li",[s._v("如果已经升级到了 HTTPS，那么再升级到 HTTP/2 会很简单；")]),s._v(" "),a("li",[s._v("TLS 协议提供“ALPN”扩展，让客户端和服务器协商使用的应用层协议，“发现”HTTP/2 服务。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);